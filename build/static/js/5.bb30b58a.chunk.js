(this["webpackJsonpecommarce-apps"]=this["webpackJsonpecommarce-apps"]||[]).push([[5],{308:function(e,t,a){},311:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0),r=a.n(n);function c(e){var t=e.size,a=e.className,n=e.clr,c=void 0===n?"#0a8dff":n;return r.a.createElement("div",{className:a,style:{height:t,width:t}},r.a.createElement("svg",{version:"1.1",style:{height:t,width:t},x:"0px",y:"0px",viewBox:"0 0 80 80",xmlSpace:"preserve"},r.a.createElement("path",{fill:c,d:"M10,40c0,0,0-0.4,0-1.1c0-0.3,0-0.8,0-1.3c0-0.3,0-0.5,0-0.8c0-0.3,0.1-0.6,0.1-0.9c0.1-0.6,0.1-1.4,0.2-2.1 c0.2-0.8,0.3-1.6,0.5-2.5c0.2-0.9,0.6-1.8,0.8-2.8c0.3-1,0.8-1.9,1.2-3c0.5-1,1.1-2,1.7-3.1c0.7-1,1.4-2.1,2.2-3.1 c1.6-2.1,3.7-3.9,6-5.6c2.3-1.7,5-3,7.9-4.1c0.7-0.2,1.5-0.4,2.2-0.7c0.7-0.3,1.5-0.3,2.3-0.5c0.8-0.2,1.5-0.3,2.3-0.4l1.2-0.1 l0.6-0.1l0.3,0l0.1,0l0.1,0l0,0c0.1,0-0.1,0,0.1,0c1.5,0,2.9-0.1,4.5,0.2c0.8,0.1,1.6,0.1,2.4,0.3c0.8,0.2,1.5,0.3,2.3,0.5 c3,0.8,5.9,2,8.5,3.6c2.6,1.6,4.9,3.4,6.8,5.4c1,1,1.8,2.1,2.7,3.1c0.8,1.1,1.5,2.1,2.1,3.2c0.6,1.1,1.2,2.1,1.6,3.1 c0.4,1,0.9,2,1.2,3c0.3,1,0.6,1.9,0.8,2.7c0.2,0.9,0.3,1.6,0.5,2.4c0.1,0.4,0.1,0.7,0.2,1c0,0.3,0.1,0.6,0.1,0.9 c0.1,0.6,0.1,1,0.1,1.4C74,39.6,74,40,74,40c0.2,2.2-1.5,4.1-3.7,4.3s-4.1-1.5-4.3-3.7c0-0.1,0-0.2,0-0.3l0-0.4c0,0,0-0.3,0-0.9 c0-0.3,0-0.7,0-1.1c0-0.2,0-0.5,0-0.7c0-0.2-0.1-0.5-0.1-0.8c-0.1-0.6-0.1-1.2-0.2-1.9c-0.1-0.7-0.3-1.4-0.4-2.2 c-0.2-0.8-0.5-1.6-0.7-2.4c-0.3-0.8-0.7-1.7-1.1-2.6c-0.5-0.9-0.9-1.8-1.5-2.7c-0.6-0.9-1.2-1.8-1.9-2.7c-1.4-1.8-3.2-3.4-5.2-4.9 c-2-1.5-4.4-2.7-6.9-3.6c-0.6-0.2-1.3-0.4-1.9-0.6c-0.7-0.2-1.3-0.3-1.9-0.4c-1.2-0.3-2.8-0.4-4.2-0.5l-2,0c-0.7,0-1.4,0.1-2.1,0.1 c-0.7,0.1-1.4,0.1-2,0.3c-0.7,0.1-1.3,0.3-2,0.4c-2.6,0.7-5.2,1.7-7.5,3.1c-2.2,1.4-4.3,2.9-6,4.7c-0.9,0.8-1.6,1.8-2.4,2.7 c-0.7,0.9-1.3,1.9-1.9,2.8c-0.5,1-1,1.9-1.4,2.8c-0.4,0.9-0.8,1.8-1,2.6c-0.3,0.9-0.5,1.6-0.7,2.4c-0.2,0.7-0.3,1.4-0.4,2.1 c-0.1,0.3-0.1,0.6-0.2,0.9c0,0.3-0.1,0.6-0.1,0.8c0,0.5-0.1,0.9-0.1,1.3C10,39.6,10,40,10,40z"},r.a.createElement("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 40 40",to:"360 40 40",dur:"0.6s",repeatCount:"indefinite"}))))}},331:function(e,t,a){e.exports=a(332)},332:function(e,t,a){var n,r,c;r=[t,a(0),a(21),a(333),a(4)],void 0===(c="function"===typeof(n=function(e,t,a,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=s(t),l=s(a),o=s(n),i=s(r);function s(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){function t(e){m(this,t);var a=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return window.React=c.default,window.ReactDOM=l.default,a.state={showButton:!1},a}return p(t,e),u(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.isScriptLoaded,a=e.isScriptLoadSucceed;this.state.show||t&&!this.props.isScriptLoaded&&(a?this.setState({showButton:!0}):(console.log("Cannot load Paypal script!"),this.props.onError()))}},{key:"componentDidMount",value:function(){var e=this.props,t=e.isScriptLoaded,a=e.isScriptLoadSucceed;t&&a&&this.setState({showButton:!0})}},{key:"render",value:function(){var e=this,t=function(){return paypal.rest.payment.create(e.props.env,e.props.client,Object.assign({transactions:[{amount:{total:e.props.total,currency:e.props.currency}}]},e.props.paymentOptions),{input_fields:{no_shipping:e.props.shipping}})},a=function(t,a){return a.payment.execute().then((function(a){var n=Object.assign({},e.props.payment);n.paid=!0,n.cancelled=!1,n.payerID=t.payerID,n.paymentID=t.paymentID,n.paymentToken=t.paymentToken,n.returnUrl=t.returnUrl,n.address=a.payer.payer_info.shipping_address,n.email=a.payer.payer_info.email,e.props.onSuccess(n)}))},n="";return this.state.showButton&&(n=c.default.createElement(paypal.Button.react,{env:this.props.env,client:this.props.client,style:this.props.style,payment:t,commit:!0,onAuthorize:a,onCancel:this.props.onCancel})),c.default.createElement("div",null,n)}}]),t}(c.default.Component);f.propTypes={currency:i.default.string.isRequired,total:i.default.number.isRequired,client:i.default.object.isRequired,style:i.default.object},f.defaultProps={paymentOptions:{},env:"sandbox",shipping:null,onSuccess:function(e){console.log("The payment was succeeded!",e)},onCancel:function(e){console.log("The payment was cancelled!",e)},onError:function(e){console.log("Error loading Paypal script!",e)}},e.default=(0,o.default)("https://www.paypalobjects.com/api/checkout.js")(f)})?n.apply(t,r):n)||(e.exports=c)},333:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();t.startLoadingScripts=E;var c=a(0),l=m(c),o=m(a(4)),i=m(a(334)),s=a(335);function m(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function f(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var y=[],v={},b=[];function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.noop,a=function(e){if(y.indexOf(e)<0)return function(t){var a=v[e]||[];if(a.push(t),v[e]=a,1===a.length)return(0,s.newScript)(e)((function(t){v[e].forEach((function(a){return a(t,e)})),delete v[e]}))}},n=e.map((function(e){return Array.isArray(e)?e.map(a):a(e)}));s.series.apply(void 0,f(n))((function(e,t){e?b.push(t):Array.isArray(t)?t.forEach(h):h(t)}))((function(e){g(),t(e)}))}var h=function(e){y.indexOf(e)<0&&y.push(e)},g=function(){b.length>0&&(b.forEach((function(e){var t=document.querySelector("script[src='"+e+"']");null!=t&&t.parentNode.removeChild(t)})),b=[])};t.default=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){var a=function(a){function c(e,t){u(this,c);var a=d(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e,t));return a.state={isScriptLoaded:!1,isScriptLoadSucceed:!1},a._isMounted=!1,a}return p(c,a),r(c,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,E(t,(function(t){e._isMounted&&e.setState({isScriptLoaded:!0,isScriptLoadSucceed:!t},(function(){t||e.props.onScriptLoaded()}))}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var t=n({},this.props,this.state);return l.default.createElement(e,t)}}]),c}(c.Component);return a.propTypes={onScriptLoaded:o.default.func},a.defaultProps={onScriptLoaded:s.noop},(0,i.default)(a,e)}}},334:function(e,t,a){"use strict";var n={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},c="function"===typeof Object.getOwnPropertySymbols;e.exports=function(e,t,a){if("string"!==typeof t){var l=Object.getOwnPropertyNames(t);c&&(l=l.concat(Object.getOwnPropertySymbols(t)));for(var o=0;o<l.length;++o)if(!n[l[o]]&&!r[l[o]]&&(!a||!a[l[o]]))try{e[l[o]]=t[l[o]]}catch(i){}}return e}},335:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.isDefined=function(e){return null!=e};var n=t.isFunction=function(e){return"function"===typeof e},r=(t.noop=function(e){},t.newScript=function(e){return function(t){var a=document.createElement("script");return a.src=e,a.addEventListener("load",(function(){return t(null,e)})),a.addEventListener("error",(function(){return t(!0,e)})),document.body.appendChild(a),a}},function(e){var t=Object.keys(e),a=-1;return{next:function(){return++a>=t.length?null:t[a]}}}),c=t.parallel=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return function(a){var r=!1,c=0,l=[];(t=t.filter(n)).length<=0?a(null):t.forEach((function(o,i){o((function(o){for(var s=arguments.length,m=Array(s>1?s-1:0),u=1;u<s;u++)m[u-1]=arguments[u];o?r=!0:(m.length<=1&&(m=m[0]),l[i]=m,c++),n(e)&&e.call(null,o,m,i),r?a(!0):t.length===c&&a(null,l)}))}))}}};t.series=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return function(a){t=t.filter((function(e){return null!=e}));var l=r(t),o=function(){var a=l.next(),n=t[a];return Array.isArray(n)&&(n=c.apply(null,n).call(null,e)),[+a,n]},i=void 0,s=void 0,m=o();if(i=m[0],null==(s=m[1]))return a(null);var u=[];!function t(){s((function(r){for(var c=arguments.length,l=Array(c>1?c-1:0),d=1;d<c;d++)l[d-1]=arguments[d];if(l.length<=1&&(l=l[0]),n(e)&&e.call(null,r,l,i),r)a(r);else{if(u.push(l),m=o(),i=m[0],null==(s=m[1]))return a(null,u);t()}}))}()}}}},377:function(e,t,a){"use strict";a.r(t);var n=a(13),r=a(0),c=a.n(r),l=a(6),o=a(55),i=a(56),s=a(19),m=a(166),u=a(10),d=a(41),p=a(111),f=a(14),y=a(110),v=a(292),b=a(165),E=a(331),h=a.n(E),g=a(23),N=(a(37),a(65)),O=a(92);a(308),a(93);function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(a,!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var P=Object(u.b)((function(e){return w({},e.auth,{delivery:e.shop.deliveryMethod,payment:e.shop.payment})}),(function(e){return{addCard:function(t){return e(Object(d.j)(t))},setPayment:function(t){return e(Object(p.i)(t))}}}))((function(e){var t=Object(r.useState)("swype"),a=Object(n.a)(t,2),l=a[0],o=(a[1],Object(r.useState)({standard:!0,express:!1})),i=Object(n.a)(o,2),s=i[0],m=(i[1],Object(r.useState)({status:!1,type:"danger",message:""})),u=Object(n.a)(m,2),d=u[0],p=u[1];Object(r.useEffect)((function(){s.standard&&e.callback({method:l,delivery:1,deliveryInfo:e.delivery[0]})}),[s.standard,l,e]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(O.a,{loading:!1}),c.a.createElement("div",{className:"row d-flex align-items-center m-3"},c.a.createElement("div",{className:"col-md-3"},c.a.createElement("h3",null,"Payment Mobile Number:")),c.a.createElement("div",{className:"col-md-4"},c.a.createElement("div",{className:"input-group"},c.a.createElement("input",{type:"text",className:"form-control",name:"payment_number",onChange:function(t){e.setPayment(w({},e.payment,Object(f.a)({},t.target.name,t.target.value)))}}))),c.a.createElement("div",{className:"col-md-3"},e.inputErr&&c.a.createElement(b.a,{variant:"danger",className:"ml-2"},e.inputErr))),c.a.createElement("div",{className:"row payment-header-card m-3"},c.a.createElement("div",{className:"col-4"},c.a.createElement("p",null,"Delivery Place: ",e.payment&&e.payment.deliveryInfo&&e.payment.deliveryInfo.delivery_name)),c.a.createElement("div",{className:"col-4"},c.a.createElement("p",null,"Delivery Time : ",e.payment&&e.payment.deliveryInfo&&e.payment.deliveryInfo.delivery_time," days")),c.a.createElement("div",{className:"col-4"},c.a.createElement("p",null,"Delivery Cost : ",e.payment&&e.payment.deliveryInfo&&e.payment.deliveryInfo.price," Ksh"))),c.a.createElement("div",{className:"mt-3"},c.a.createElement(b.a,{show:d.status,variant:d.type,onClose:function(){return p(w({},d,{status:!1}))},dismissible:!0},c.a.createElement("p",null,d.message))))})),_={env:"sandbox",currency:"USD",client:{sandbox:"AealZEZeqmY7Losu4ottC6QaYcqXdXNODFgEsyhM-p4sVbUhNESDO2fivVthS7vbnR7lrt2FrIhKGynm",production:"AcmOk1IjB5Rwg-UR8hXaNoA_V5vUygu3J1ZZ3aAZ1dasN51hwonSMchFqSyyD5V_OaPUPcIXFIPIkpDy"}},x=a(9),I=a(7),S=a.n(I),k=a(311);function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(a,!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var D=Object(u.b)((function(e){return L({},e.auth,{},e.shop,{},e.site,{delivery:e.shop.deliveryMethod})}),(function(e){return{setAddress:function(t){return e(Object(p.h)(t))},setPayment:function(t){return e(Object(p.i)(t))},setRedirectToOrder:function(t){return e(Object(N.c)(t))},confirmOrder:function(t){return e(Object(d.d)(t))},clearPromo:function(){return e(Object(p.b)())}}}))((function(e){var t=Object(g.k)(),a=Object(r.useState)(!1),u=Object(n.a)(a,2),d=(u[0],u[1]),p=Object(r.useState)({prev:0,next:1,show:!1}),E=Object(n.a)(p,2),N=E[0],j=E[1],w=Object(r.useState)(""),I=Object(n.a)(w,2),C=I[0],D=I[1],T=Object(r.useState)(!0),M=Object(n.a)(T,2),A=M[0],F=M[1],B=Object(r.useState)(null),R=Object(n.a)(B,2),q=R[0],K=R[1],U=Object(r.useState)({first_name:e.user.first_name,last_name:e.user.last_name,email:e.user.email,terms:!1,policy:!1}),z=Object(n.a)(U,2),W=z[0],V=z[1],Z=Object(r.useState)({status:!1,type:"danger",message:""}),Q=Object(n.a)(Z,2),G=Q[0],X=Q[1];Object(r.useEffect)((function(){e.redirect_order&&setTimeout((function(){t.push("/my-order")}),5e3),e.status.error&&e.status.error.data&&X({status:!0,type:"danger",message:e.status.error.data.messages})}),[e.status.error,e,t]);var Y=e.payment,J=(Y.deliveryInfo?Y.deliveryInfo.price:e.delivery[0].price,Y.deliveryInfo?Y.deliveryInfo.delivery_time:e.delivery[0].delivery_time),H=e.currencyRate?e.currencyRate.kes:1,$=Math.ceil(e.costWithDelivery/H),ee=function(){var t=document.getElementById("payment-section"),a=document.getElementById("address-section"),n=document.getElementById("order-confirmation-section"),r=document.getElementById("payment-confirmation"),c=document.getElementById("step-1"),l=document.getElementById("step-2"),o=document.getElementById("step-3"),i=document.getElementById("step-4");1===N.next?(a.classList.remove("tab-active-content"),t.classList.add("tab-active-content"),c.classList.remove("active-tab"),l.classList.add("active-tab"),j({prev:1,next:2})):2===N.next?Y.payment_number&&Y.payment_number.length>5?(D(""),ie(Y.payment_number,e.costWithDelivery),t.classList.remove("tab-active-content"),n.classList.add("tab-active-content"),l.classList.remove("active-tab"),o.classList.add("active-tab"),j({prev:2,next:3})):(K("Mobile Number Is Required"),setTimeout((function(){K(null)}),2500)):3===N.next&&(oe(),n.classList.remove("tab-active-content"),r.classList.add("tab-active-content"),o.classList.remove("active-tab"),i.classList.add("active-tab"),j({prev:3,next:4}))},te=function(){var e=document.getElementById("payment-section"),t=document.getElementById("address-section"),a=document.getElementById("order-confirmation-section"),n=document.getElementById("payment-confirmation"),r=document.getElementById("step-1"),c=document.getElementById("step-2"),l=document.getElementById("step-3"),o=document.getElementById("step-4");1===N.prev?(e.classList.remove("tab-active-content"),t.classList.add("tab-active-content"),c.classList.remove("active-tab"),r.classList.add("active-tab"),j({prev:0,next:1})):2===N.prev?(a.classList.remove("tab-active-content"),e.classList.add("tab-active-content"),l.classList.remove("active-tab"),c.classList.add("active-tab"),j({prev:1,next:2})):3===N.prev&&(n.classList.remove("tab-active-content"),a.classList.add("tab-active-content"),o.classList.remove("active-tab"),l.classList.add("active-tab"),j({prev:2,next:3}))},ae=function(e){return V(L({},W,Object(f.a)({},e.target.name,e.target.value)))},ne=function(t){return function(t){var a=[];e.cart.map((function(e){return a.push({id:e.id,quantity:e.quantity})}));var n=e.promo?e.promo.id:null;e.confirmOrder({address:W,payment:{method:Y.method,info:t},delivery:Y.delivery,books:a,promo:n,deliveryTime:J}),e.clearPromo(),d(!0)}(t)},re=function(e){return window.location.href=e.cancelUrl},ce=function(e){},le=function(t){var a=[];e.cart.map((function(e){return a.push({category:e.book_category.category,id:e.id,quantity:e.quantity})}));var n=e.promo?e.promo.id:null;e.confirmOrder({address:W,payment:{method:Y.method,info:{mpesa_number:Y.mpesa_number,price:e.costWithDelivery}},delivery:Y.delivery,books:a,promo:n})},oe=function(){var t=[];e.cart.map((function(e){return t.push({category:e.book_category.category,id:e.id,quantity:e.quantity})}));var a=e.promo?e.promo.id:null;e.confirmOrder({address:W,payment:{method:Y.method,delivery_time:Y.deliveryInfo.delivery_time,delivery_cost:Y.deliveryInfo.price,info:{mpesa_number:Y.mpesa_number,price:e.costWithDelivery}},delivery:Y.delivery,books:t,promo:a,orderRef:C.orderRef})},ie=function(e,t){S.a.post(x.a._GET_PAY_IFR,{userMobile:e,amount:t}).then((function(e){var t=e.data.data,a=t.iframe,n=t.orderRef;D({iframe:a,orderRef:n}),localStorage.setItem("or",btoa(btoa(n)))}))};return c.a.createElement(c.a.Fragment,null,c.a.createElement(O.a,{loading:!1}),c.a.createElement(o.a,null,c.a.createElement(m.a,null,c.a.createElement(m.a.Body,null,c.a.createElement("div",{className:"checkout-tab"},c.a.createElement("div",{className:"header-section"},c.a.createElement("button",{id:"step-1",className:"btn btn-primary active-tab"},"Address details"),c.a.createElement("i",{className:"fas fa-angle-double-right"}),c.a.createElement("button",{id:"step-2",className:"btn btn-primary"},"Payment and delivery"),c.a.createElement("i",{className:"fas fa-angle-double-right"}),c.a.createElement("button",{id:"step-3",className:"btn btn-primary"},"Order confirmation"),c.a.createElement("i",{className:"fas fa-angle-double-right"}),c.a.createElement("button",{id:"step-4",className:"btn btn-primary"},"Payment confirmation")),c.a.createElement("div",{id:"address-section",className:"tab address-section tab-active-content mt-5"},c.a.createElement(i.a,null,c.a.createElement(s.a,{sm:"12"},c.a.createElement("button",{disabled:!0,className:"btn btn-primary btn-block d-md-none d-lg-none d-xl-none"},"Address details"),c.a.createElement(y.a,{className:"mt-5",action:"post"},c.a.createElement(i.a,null,c.a.createElement(s.a,{sm:6,className:"form-group"},c.a.createElement("label",{htmlFor:"first-name"},"First Name"),c.a.createElement("input",{type:"text",name:"first_name",id:"first-name",className:"form-control",value:W.first_name,onChange:ae})),c.a.createElement(s.a,{sm:6,className:"form-group"},c.a.createElement("label",{htmlFor:"last-name"},"Last Name"),c.a.createElement("input",{type:"text",name:"last_name",id:"last-name",className:"form-control",value:W.last_name,onChange:ae})),c.a.createElement(s.a,{col:12,className:"form-group"},c.a.createElement("label",{htmlFor:"country"},"Estate"),c.a.createElement("select",{name:"estate",id:"estate",className:"form-control",onChange:function(t){var a=e.delivery[t.target.value],n=a.id,r=a.delivery_name,c=a.delivery_time,l=a.price;V(L({},W,{estate:r})),e.setPayment({method:"swype",delivery:n,deliveryInfo:{id:n,delivery_name:r,delivery_time:c,price:l}}),e.getPaymentMethod({method:"swype",delivery:n,deliveryInfo:{id:n,delivery_name:r,delivery_time:c,price:l}})}},c.a.createElement("option",{value:""},"--Select one--"),e.delivery.map((function(e,t){return c.a.createElement("option",{key:e.id,value:t},e.delivery_name)})))),c.a.createElement(s.a,{col:12,className:"form-group"},c.a.createElement("label",{htmlFor:"city"},"City"),c.a.createElement("input",{type:"text",name:"city",id:"city",className:"form-control",onChange:ae})),c.a.createElement(s.a,{sm:12,className:"form-group"},c.a.createElement("label",{htmlFor:"address"},"Address"),c.a.createElement("input",{type:"text",name:"address",id:"address",className:"form-control",onChange:ae})),c.a.createElement(s.a,{sm:12,className:"form-group"},c.a.createElement("label",{htmlFor:"zip-code"},"Zip Code"),c.a.createElement("input",{type:"text",name:"zip",id:"zipcode",className:"form-control",onChange:ae})),c.a.createElement(s.a,{sm:6,className:"form-group"},c.a.createElement("label",{htmlFor:"house"},"House/apartment number"),c.a.createElement("input",{type:"text",name:"house_num",id:"house",className:"form-control",onChange:ae})),c.a.createElement(s.a,{sm:6,className:"form-group"},c.a.createElement("label",{htmlFor:"email"},"Email"),c.a.createElement("input",{type:"text",name:"email",id:"email",className:"form-control",value:W.email,onChange:ae})),c.a.createElement(s.a,{sm:6,className:"form-group"},c.a.createElement("label",{htmlFor:"phone-number"},"Phone Number"),c.a.createElement("input",{type:"text",name:"phone",id:"phone-number",className:"form-control",onChange:ae})),c.a.createElement(s.a,{sm:12,className:"form-group"},c.a.createElement("label",{htmlFor:"comment"},"Comments"),c.a.createElement("textarea",{name:"comments",id:"comment",cols:"30",rows:"4",className:"form-control",onChange:ae})),c.a.createElement(s.a,{sm:12,className:"form-group fromCheckbox mt-1"},c.a.createElement("div",{className:"terms-and-condition"},c.a.createElement(y.a.Check,{custom:!0,type:"checkbox",label:c.a.createElement("b",null,"I agree with"),id:"checkboxTerms",onChange:function(){V(L({},W,{terms:!W.terms}))}}),c.a.createElement("p",null,c.a.createElement(l.Link,{to:"/term/conditions",className:"termsTxt"},"Terms and Conditions")))),c.a.createElement(s.a,{sm:12,className:"col-md-12 form-group fromCheckbox mt-1 terms-and-condition"},c.a.createElement(y.a.Check,{custom:!0,type:"checkbox",label:c.a.createElement("b",null,"I agree with"),id:"checkboxPrivacy",onChange:function(){V(L({},W,{policy:!W.policy}))}}),c.a.createElement("p",null,c.a.createElement(l.Link,{to:"/privacy",className:"termsTxt"}," Privacy Policy")))),c.a.createElement(s.a,{className:"text-right p-0"},c.a.createElement(v.a,{className:"btn btn-primary cart-btn-next",disabled:!(W.terms&&W.policy&&W.estate),onClick:ee}," Next")))))),c.a.createElement("div",{id:"payment-section",className:"tab payment-section mt-3"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col col-12"},c.a.createElement("button",{disabled:!0,className:"btn btn-primary btn-block d-md-none d-lg-none d-xl-none mb-3"},"Payment and delivery"),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(P,{inputErr:q,callback:function(t){e.getPaymentMethod(t)}}),c.a.createElement(y.a,{className:"mt-5"},c.a.createElement(i.a,null,c.a.createElement("div",{className:"col-12 d-flex justify-content-between p-0"},c.a.createElement(s.a,{sm:"6"},c.a.createElement("button",{type:"button",className:"btn btnSecondary",onClick:te},"Prev")),c.a.createElement(s.a,{sm:"6",className:"col-6 text-right"},c.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:ee},"Next")))))))),c.a.createElement("div",{id:"order-confirmation-section",className:"tab order-confirmation-section"},c.a.createElement(y.a,{className:"userInfoForm mt-3"},c.a.createElement("button",{disabled:!0,className:"btn btn-primary btn-block d-md-none d-lg-none d-xl-none mb-3"},"Payment and delivery"),c.a.createElement("h3",{className:"mt-2 mb-2"},"Confirm order details"),c.a.createElement(i.a,{className:"row mt-4"},c.a.createElement(s.a,{sm:"6"},c.a.createElement("ul",{className:"orderConfrimationList text-large"},c.a.createElement("li",null,c.a.createElement("strong",null,"First name : "),W.first_name),c.a.createElement("li",null,c.a.createElement("strong",null,"Last name : "),W.last_name),c.a.createElement("li",null,c.a.createElement("strong",null,"Phone : ")," ",W.phone),c.a.createElement("li",null,c.a.createElement("strong",null,"Email : "),e.user.email))),c.a.createElement(s.a,{sm:"6"},c.a.createElement("ul",{className:"orderConfrimationList"},c.a.createElement("li",null,c.a.createElement("strong",null,"City : "),W.city),c.a.createElement("li",null,c.a.createElement("strong",null,"Estate : ")," ",W.estate),c.a.createElement("li",null,c.a.createElement("strong",null,"Address : ")," ",W.address),c.a.createElement("li",null,c.a.createElement("strong",null,"Zip code : ")," ",W.zip))),c.a.createElement(s.a,{sm:"6",className:"mt-4"},c.a.createElement("ul",{className:"orderConfrimationList text-large"},c.a.createElement("li",null,c.a.createElement("strong",null,"Product(s) Price : "),"Ksh ",e.productPrice),c.a.createElement("li",null,c.a.createElement("strong",null,"Delivery method : ")," ",Y&&Y.deliveryInfo&&Y.deliveryInfo.delivery_name),c.a.createElement("li",null,c.a.createElement("strong",null,"Delivery cost : "),"Ksh ",Y&&Y.deliveryInfo&&Y.deliveryInfo.price),c.a.createElement("li",null,c.a.createElement("strong",null,"In Total: "),"Ksh ",e.costWithDelivery),c.a.createElement("li",null,c.a.createElement("strong",null,"Expected arrival : "),"  ",function(e){var t=new Date;return t.setDate(t.getDate()+Number(e)),t.getDate()+"/"+(t.getMonth()+1<10?"0":"")+(t.getMonth()+1)+"/"+t.getFullYear()}(Y&&Y.deliveryInfo&&Y.deliveryInfo.delivery_time))))),c.a.createElement(i.a,{className:"form-group mt-5"},c.a.createElement("div",{className:"col-12 d-flex justify-content-between"},c.a.createElement("button",{type:"button",className:"btn btnSecondary",onClick:te},"Prev"),c.a.createElement("button",{type:"button",className:"btn btnSecondary",onClick:ee,disabled:""===C},"Next ",""===C&&c.a.createElement("span",{className:"fa fa-spinner fa-spin"})),function(){switch(Y.method){case"payPal":return c.a.createElement(h.a,{env:_.env,client:_.client,currency:_.currency,total:$,onError:ce,onSuccess:ne,onCancel:re});case"mpesa":return c.a.createElement(v.a,{onClick:le},"Checkoutrr");default:return null}}())))),c.a.createElement("div",{id:"payment-confirmation",className:"tab payment-confirmation mt-3"},(""===C||A)&&c.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},c.a.createElement(k.a,{size:"100",clr:"#3897cf"})),c.a.createElement("iframe",{src:C.iframe,onLoad:function(){return F(!1)},title:"Swype Pay",style:{width:"100%",height:580}}),c.a.createElement(i.a,null,c.a.createElement("div",{className:"col-12 d-flex justify-content-between p-0"})))))),c.a.createElement(b.a,{show:G.status,variant:G.type,onClose:function(){return X(L({},G,{status:!1}))},dismissible:!0},c.a.createElement("p",null,G.message))))})),T=a(113),M=a.n(T);t.default=Object(u.b)((function(e){return{cart:e.shop.cart,delivery:e.shop.deliveryMethod,promoInfo:e.shop.promo,token:e.auth.jwt.token}}),(function(e){return{getUser:function(){return e(Object(d.g)())},deliveryMethodFetch:function(){return e(Object(p.e)())}}}))((function(e){var t=e.cart,a=0,u=e.delivery?e.delivery[0].price:0,d=Object(r.useState)(u),p=Object(n.a)(d,2),f=p[0],y=p[1],v=t.map((function(e){return e.quantity})).reduce((function(e,t){return e+t}),0);window.localStorage.setItem("sumQty",v),v&&(v=window.localStorage.getItem("sumQty")),0!==t.length&&t.map((function(e){return a+=e.amountPrice}));var b=e.promoInfo?e.promoInfo:{status:!1},E=a;if(b.status){var h=b.discount,g=b.upto;Number(a)<=Number(g)?E=a-a*(h/100):Number(a)>Number(g)&&(E=a-g)}var N=parseFloat(E)+parseFloat(f);Object(r.useEffect)((function(){e.getUser()}),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(O.a,{loading:!1}),c.a.createElement("div",{className:"allWrapper bgGray"},c.a.createElement(o.a,null,c.a.createElement(i.a,null,c.a.createElement(s.a,{className:"text-center"},c.a.createElement("div",{className:"logoWrapper"},c.a.createElement("h1",{className:"logoText"},c.a.createElement(l.Link,{to:"/"},c.a.createElement("img",{loading:"lazy",alt:"A Book Store",src:M.a,style:{width:"150px",marginTop:"35px"}}))))))),c.a.createElement("main",{className:"mainContent clearfix",id:"mainContent"},0===t.length?"":c.a.createElement("section",{className:"checkoutProductDetails clearfix pt-5 pb-5",id:"checkoutProductDetails"},c.a.createElement(o.a,null,c.a.createElement(m.a,{className:"border-0"},c.a.createElement(m.a.Body,null,c.a.createElement(i.a,null,c.a.createElement(s.a,{sm:"8"},c.a.createElement("div",{className:"productCartList webScrollbar"},t.map((function(e,t){return c.a.createElement("div",{key:t,className:"productCartSingle d-flex align-items-center mb-2"},c.a.createElement("div",{className:"cartProductMedia bgGray"},c.a.createElement("img",{loading:"lazy",src:e.cover_images.img_1,alt:""})),c.a.createElement("div",{className:"cartProductDes pl-3"},c.a.createElement("h3",null,c.a.createElement(l.Link,{to:"/product/".concat(e.id)},e.name)),c.a.createElement("p",null,"Price:",c.a.createElement("span",{className:"price"}," Ksh ",e.price," ")),c.a.createElement("p",null,"Quantity:",c.a.createElement("span",{className:"qut"}," ",e.quantity," ")),c.a.createElement("p",null,"Total:",c.a.createElement("span",{className:"totalPrice"}," Ksh ",e.amountPrice," "))))})))),c.a.createElement(s.a,{className:"align-self-end"},c.a.createElement("div",{className:"cartProductValue clearfix",id:"cartProductValue"},c.a.createElement("ul",{className:"productValue text-right"},c.a.createElement("li",null,c.a.createElement("strong",null,"Total Quantity: ")," ",v),c.a.createElement("li",null,c.a.createElement("strong",null,"Total Product Price: ")," Ksh ",a),b.status?c.a.createElement("li",null,c.a.createElement("strong",null,"Price after Discount: ")," Ksh ",E):c.a.createElement(c.a.Fragment,null),c.a.createElement("li",null,c.a.createElement("strong",null,"Delivery:")," Ksh ",f),c.a.createElement("li",null,c.a.createElement("strong",null,"In Total Total:")," Ksh ",N))))))))),c.a.createElement("section",{className:"checkoutInfoDetails pb-5 clearfix",id:"checkoutInfoDetails"},c.a.createElement(D,{productPrice:E,costWithDelivery:N,getPaymentMethod:function(e){y(e.deliveryInfo.price)}})))))}))}}]);
//# sourceMappingURL=5.bb30b58a.chunk.js.map