{"version":3,"sources":["pages/ShopPage/styled.js","pages/ShopPage/shared/Sorting.jsx","pages/ShopPage/index.jsx"],"names":["Wrapper","styled","div","PaginationRowWrapper","Sorting","props","filterShow","sortBy","handleSortBy","classes","handleNext","handlePreviews","handleShowBook","pagination","totalPage","Row","className","htmlFor","value","onChange","name","show","page_field","onClick","type","page","readOnly","useStyle","createUseStyles","width","marginRight","marginLeft","connect","state","initItem","undefined","book","total","initShowItem","cart","shop","totalItem","showItem","favorite","filter","dispatch","fetchBooks","keyword","fetchAllBook","booksByCategory","id","fetchBooksByCategory","filterByPrice","lowPrice","highestPrice","type_id","filterByPriceRange","filterShortByType","query","filterShortBy","stageList","category_id","fetchStages","getBooksByFilter","filterType","filterId","fetchBooksByFilter","useParams","title","pageNumber","filter_type","filter_id","data","pending","useState","higherPrice","lowerPrice","priceFilter","setPriceFilter","setPagination","setSortBy","length","favoriteItem","items","shopUrl","window","location","pathname","useEffect","isNaN","console","log","PriceRange","minPrice","maxPrice","e","target","setWidth","setWidths","document","body","clientWidth","setFilterSortShow","addEventListener","removeEventListener","filterSortShow","loading","Header","favorite_item","cartItem","MobileHeader","Container","Col","BreadCrumb","sm","callback","map","index","key","once","height","Card","to","src","cover_images","img_1","alt","book_author","price","NewsLetterComponent","Modal","onHide","size","centered","ModalBody","FooterComponent"],"mappings":"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","file":"static/js/27.389a4b2a.chunk.js","sourcesContent":["import styled from \"styled-components\";\r\n\r\nexport const Wrapper = styled.div`\r\n  position: fixed;\r\n  top: 15%;\r\n  right: 5%;\r\n  z-index: 999;\r\n  //@media (max-width: 400px) {\r\n  //  top: 28%;\r\n  //}\r\n  //@media (max-width: 385px) {\r\n  //  top: 31%;\r\n  //}\r\n  //\r\n  //@media (max-width: 338px) {\r\n  //  top: 23%;\r\n  //}\r\n\r\n  .filter {\r\n    height: 35px;\r\n    width: 35px;\r\n    border-radius: 50%;\r\n    background-color: #000;\r\n    opacity: 0.6;\r\n    color: #fff;\r\n    display: none;\r\n    cursor: pointer;\r\n\r\n    @media (max-width: 990px) {\r\n      display: block;\r\n    }\r\n  }\r\n\r\n  .filter svg {\r\n    position: absolute;\r\n    top: 25%;\r\n    left: 23%;\r\n    font-size: 20px;\r\n  }\r\n`;\r\nexport const PaginationRowWrapper = styled.div`\r\n  /* @media (max-width: 990px) {\r\n    .Pagination-Row {\r\n      background-color: #f6f6f6;\r\n      z-index: 99;\r\n      position: fixed;\r\n      top: 5%;\r\n      left: 6.7%;\r\n      width: 80%;\r\n      padding: 1rem;\r\n      display: none;\r\n    }\r\n    .show {\r\n      display: block;\r\n    }\r\n  } */\r\n`;\r\n","import React from \"react\";\r\nimport {Row} from \"react-bootstrap\";\r\nimport {PaginationRowWrapper} from \"../styled\";\r\n\r\nconst Sorting = (props) => {\r\n    const {\r\n        filterShow,\r\n        sortBy,\r\n        handleSortBy,\r\n        classes,\r\n        handleNext,\r\n        handlePreviews,\r\n        handleShowBook,\r\n        pagination,\r\n        totalPage\r\n    } = props\r\n\r\n\r\n    return (\r\n        <PaginationRowWrapper>\r\n            <Row\r\n                className=\"Pagination-Row mb-5\"\r\n            >\r\n                <div className='col'>\r\n                    <ul className='singleFilter d-flex align-items-center'>\r\n                        <li>\r\n                            <label htmlFor=''>Sort By</label>\r\n                        </li>\r\n                        <li>\r\n                            <select\r\n                                className='filterSelect form-control'\r\n                                value={sortBy}\r\n                                onChange={handleSortBy}\r\n                            >\r\n                                <option value=''>select</option>\r\n                                <option value='Popular'>Popular</option>\r\n                                <option value='New'>New</option>\r\n                                <option value='Price: low to high'>\r\n                                    Price: low to high\r\n                                </option>\r\n                                <option value='Price: high to low'>\r\n                                    Price: high to low\r\n                                </option>\r\n                            </select>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n\r\n                <div className='col'>\r\n                    <ul className='singleFilter d-flex align-items-center'>\r\n                        <li>\r\n                            <label>Show</label>\r\n                        </li>\r\n\r\n                        <li>\r\n                            <select\r\n                                name='up-filter-select'\r\n                                className='filterSelect form-control'\r\n                                value={pagination.show}\r\n                                onChange={handleShowBook}\r\n                            >\r\n                                <option value='20'>20</option>\r\n                                <option value='45'>45</option>\r\n                                <option value='100'>100</option>\r\n                            </select>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n\r\n                <div className='col'>\r\n                    <nav aria-label='Page navigation'>\r\n                        <ul className='pagination align-items-center justify-content-between'>\r\n                            <li\r\n                                className={`page-item ${classes.page_field}`}\r\n                                onClick={handlePreviews}\r\n                            >\r\n                                <button className='page-link'>\r\n                                    <i className='fas fa-chevron-left'/>\r\n                                </button>\r\n                            </li>\r\n                            <li\r\n                                className={`page-item ${classes.page_field}`}\r\n                            >\r\n                                Page\r\n                            </li>\r\n                            <li\r\n                                className={`page-item ${classes.page_field}`}\r\n                            >\r\n                                <input\r\n                                    type='text'\r\n                                    className='page-link'\r\n                                    value={pagination.page}\r\n                                    readOnly\r\n                                />\r\n                            </li>\r\n                            <li className='page-item'>of</li>\r\n                            <li\r\n                                className={`page-item ${classes.page_field}`}\r\n                            >\r\n                                <input\r\n                                    type='text'\r\n                                    value={totalPage || 0}\r\n                                    className='page-link'\r\n                                    readOnly\r\n                                />\r\n                            </li>\r\n                            <li\r\n                                className='page-item'\r\n                                onClick={handleNext}\r\n                            >\r\n                                <button className='page-link'>\r\n                                    <i className='fas fa-chevron-right'/>\r\n                                </button>\r\n                            </li>\r\n                        </ul>\r\n                    </nav>\r\n                </div>\r\n            </Row>\r\n        </PaginationRowWrapper>\r\n    )\r\n}\r\n\r\nexport default Sorting\r\n","import React, {useEffect, useState} from 'react';\r\nimport {Link, useParams} from 'react-router-dom';\r\nimport {Card, Col, Container, Modal, ModalBody, Row} from 'react-bootstrap';\r\nimport LazyLoad from 'react-lazyload';\r\nimport {connect} from 'react-redux';\r\nimport {createUseStyles} from 'react-jss';\r\nimport {\r\n    fetchAllBook,\r\n    fetchBooksByCategory,\r\n    fetchBooksByFilter,\r\n    filterByPriceRange,\r\n    filterShortBy,\r\n} from '../../redux/actions/bookActions';\r\nimport {fetchStages} from '../../redux/actions/filterAction';\r\nimport Filters from '../../components/shop/FiltersComponents';\r\nimport {NewsLetterComponent} from '../../components/offerPageComponents/NewsLetterComponent';\r\nimport FooterComponent from '../../components/FooterComponent/FooterComponent';\r\nimport HeaderComponent from '../../components/header/Header';\r\nimport MobileHeader from '../../components/header/MobileHeader';\r\nimport BreadCrumb from '../../components/BreadCrumb/BreadCrumb';\r\nimport '../assets/shop.css';\r\nimport PageLoader from '../../components/pageLoader/PageLoaderComponent';\r\nimport {BsFilter} from 'react-icons/bs';\r\nimport {IoMdClose} from 'react-icons/io';\r\nimport {Wrapper} from \"./styled\";\r\nimport Sorting from \"./shared/Sorting\";\r\n\r\nconst useStyle = createUseStyles({\r\n    page_field: {width: '50px', marginRight: '5px', marginLeft: '5px'},\r\n});\r\n\r\nconst ShopPage = (props) => {\r\n    const classes = useStyle();\r\n    const {\r\n        id,\r\n        title,\r\n        showItem,\r\n        pageNumber,\r\n        keyword,\r\n        filter_type,\r\n        filter_id,\r\n    } = useParams();\r\n    const {\r\n        stageList,\r\n        filterShortByType,\r\n        fetchBooks,\r\n        filterByPrice,\r\n        getBooksByFilter,\r\n        booksByCategory,\r\n        book: {totalPage, data, pending},\r\n    } = props;\r\n    const [priceFilter, setPriceFilter] = useState({\r\n        higherPrice: null,\r\n        lowerPrice: null,\r\n    });\r\n    const [pagination, setPagination] = useState({show: 20, page: 1});\r\n    let [sortBy, setSortBy] = useState('');\r\n    const totalItem = props.cart.length;\r\n    const favoriteItem = props.favorite.items;\r\n    const shopUrl = window.location.pathname;\r\n\r\n    useEffect(() => {\r\n        const {show, page} = pagination;\r\n        const {higherPrice, lowerPrice} = priceFilter;\r\n        stageList(id);\r\n        if (page && show && sortBy) {\r\n            return filterShortByType(page, show, sortBy);\r\n        } else if (shopUrl === '/shopping') {\r\n            return fetchBooks(page, show, null);\r\n        } else if (\r\n            page &&\r\n            show &&\r\n            lowerPrice &&\r\n            higherPrice &&\r\n            filter_type &&\r\n            filter_id\r\n        ) {\r\n            return filterByPrice(\r\n                page,\r\n                show,\r\n                lowerPrice,\r\n                higherPrice,\r\n                filter_type,\r\n                filter_id\r\n            );\r\n        } else if (page && show && filter_type && filter_id) {\r\n            return getBooksByFilter(page, show, filter_type, filter_id);\r\n        } else if (page && show && lowerPrice && higherPrice) {\r\n            return filterByPrice(page, show, lowerPrice, higherPrice);\r\n        } else if (!isNaN(id) && id && title && page && show) {\r\n            console.log('fetch by catrr');\r\n            return booksByCategory(id, page, show);\r\n        } else if (id !== 'number' && pageNumber && showItem && keyword) {\r\n            console.log({page, show, keyword});\r\n            return fetchBooks(page, show, keyword);\r\n        }\r\n\r\n        return () => {\r\n            console.log('unmount shopage');\r\n\r\n            stageList(id);\r\n            if (page && show && sortBy) {\r\n                filterShortByType(page, show, sortBy);\r\n            } else if (shopUrl === '/shopping') {\r\n                fetchBooks(page, show, null);\r\n            } else if (id === 'all' && pageNumber && showItem && keyword) {\r\n                fetchBooks(page, show, keyword);\r\n            } else if (\r\n                page &&\r\n                show &&\r\n                lowerPrice &&\r\n                higherPrice &&\r\n                filter_type &&\r\n                filter_id\r\n            ) {\r\n                filterByPrice(\r\n                    page,\r\n                    show,\r\n                    lowerPrice,\r\n                    higherPrice,\r\n                    filter_type,\r\n                    filter_id\r\n                );\r\n            } else if (page && show && filter_type && filter_id) {\r\n                getBooksByFilter(page, show, filter_type, filter_id);\r\n            } else if (page && show && lowerPrice && higherPrice) {\r\n                filterByPrice(page, show, lowerPrice, higherPrice);\r\n            } else if (!isNaN(id) && id && title && page && show) {\r\n                console.log('fetch by cat unmount');\r\n                booksByCategory(id, page, show);\r\n            }\r\n        };\r\n    }, [\r\n        sortBy,\r\n        priceFilter,\r\n        id,\r\n        filter_type,\r\n        filter_id,\r\n        pagination,\r\n        stageList,\r\n        shopUrl,\r\n        pageNumber,\r\n        showItem,\r\n        keyword,\r\n        filterShortByType,\r\n        fetchBooks,\r\n        filterByPrice,\r\n        getBooksByFilter,\r\n        booksByCategory,\r\n        title,\r\n    ]);\r\n\r\n    const PriceRange = (minPrice, maxPrice) =>\r\n        setPriceFilter({higherPrice: maxPrice, lowerPrice: minPrice});\r\n\r\n    const handleShowBook = (e) =>\r\n        setPagination({...pagination, show: e.target.value});\r\n\r\n    const handleNext = () =>\r\n        pagination.page <= totalPage\r\n            ? setPagination({...pagination, page: pagination.page + 1})\r\n            : pagination;\r\n\r\n    const handlePreviews = () =>\r\n        pagination.page !== 1 || pagination > 0\r\n            ? setPagination({...pagination, page: pagination.page - 1})\r\n            : pagination;\r\n\r\n    const handleSortBy = (e) => setSortBy(e.target.value);\r\n\r\n    //floating filter\r\n    // const [filterShow, setFilterShow] = useState(false);\r\n    const [width, setWidth] = useState();\r\n\r\n    // const handleFilterClick = (e) => {\r\n    //     setFilterShow(!filterShow);\r\n    // };\r\n\r\n    //set the body with and checking\r\n    const setWidths = () => {\r\n        setWidth(document.body.clientWidth);\r\n        if (width > 970) {\r\n            // setFilterShow(false);\r\n            setFilterSortShow(false)\r\n        }\r\n    };\r\n\r\n    //calling every time when window resize\r\n    useEffect(() => {\r\n        window.addEventListener('resize', setWidths);\r\n        return () => window.removeEventListener('resize', setWidths);\r\n    }, [width]);\r\n\r\n    useEffect(() => {\r\n        setWidths()\r\n    }, [])\r\n\r\n    //disabling body scrolling when floatng filter open\r\n    // useEffect(() => {\r\n    //     if (filterShow) {\r\n    //         document.body.style.overflow = 'hidden';\r\n    //     } else {\r\n    //         document.body.style.overflow = 'auto';\r\n    //     }\r\n    // }, [filterShow]);\r\n\r\n\r\n    const [filterSortShow, setFilterSortShow] = useState(false)\r\n\r\n    console.log(width)\r\n\r\n    return (\r\n        <>\r\n            <PageLoader loading={pending}/>\r\n            <div className='allWrapper'>\r\n                <Wrapper>\r\n                    <a className='filter' onClick={() => setFilterSortShow(true)}>\r\n                        {filterSortShow ? <IoMdClose/> : <BsFilter/>}\r\n                    </a>\r\n                </Wrapper>\r\n                <HeaderComponent\r\n                    favorite_item={favoriteItem.length}\r\n                    cartItem={totalItem}\r\n                />\r\n                <MobileHeader\r\n                    favorite_item={favoriteItem.length}\r\n                    cartItem={totalItem}\r\n                />\r\n                <main className='mainContent clearfix' id='mainContent'>\r\n                    <section\r\n                        className='sectionBreadcrumb secGap clearfix pb-0'\r\n                        id='sectionBreadcrumb'\r\n                    >\r\n                        <Container>\r\n                            <Row>\r\n                                <Col>\r\n                                    <BreadCrumb/>\r\n                                </Col>\r\n                            </Row>\r\n                        </Container>\r\n                    </section>\r\n\r\n                    <section\r\n                        className='productsBodyAsidebar clearfix'\r\n                        id='productsBodyAsidebar'\r\n                    >\r\n                        <Container>\r\n                            <Row>\r\n                                <Col sm='3'>\r\n                                    {width > 970 && (\r\n                                        <Filters callback={PriceRange}/>\r\n                                    )}\r\n                                </Col>\r\n\r\n                                <Col>\r\n                                    <div\r\n                                        className='allProductContent secGap clearfix'\r\n                                        id='allShopProduct'\r\n                                    >\r\n                                        <Row className='mb-5'>\r\n                                            <Col className='col'>\r\n                                                <h2 className='pageTitle'>\r\n                                                    <span>{title}</span> Books\r\n                                                </h2>\r\n                                            </Col>\r\n                                        </Row>\r\n                                        {data && data.length === 0 ? (\r\n                                            <h1 className='text-center'>Sorry, No Result Found :(</h1>\r\n                                        ) : (\r\n                                            <>\r\n                                                {width > 970 && (\r\n                                                    <Sorting\r\n                                                        sortBy={sortBy}\r\n                                                        handleSortBy={handleSortBy}\r\n                                                        pagination={pagination}\r\n                                                        handleShowBook={handleShowBook}\r\n                                                        classes={classes}\r\n                                                        handlePreviews={handlePreviews}\r\n                                                        totalPage={totalPage}\r\n                                                        handleNext={handleNext}\r\n                                                    />\r\n                                                )}\r\n\r\n\r\n                                                <Row className='Product_Row'>\r\n                                                    {data && data.length === 0 ? (\r\n                                                        <></>\r\n                                                    ) : (\r\n                                                        data &&\r\n                                                        data.map((book, index) => {\r\n                                                            return (\r\n                                                                <Col key={index} sm='3 mb-5'>\r\n                                                                    <LazyLoad once={true} height={200}>\r\n                                                                        <Card\r\n                                                                            className='productCard border-0 bg-transparent'>\r\n                                                                            <div className='productMedia mb-3 bgGray'>\r\n                                                                                <Link to={`/product/${book.id}`}>\r\n                                                                                    <img\r\n                                                                                        loading='lazy'\r\n                                                                                        src={\r\n                                                                                            book.cover_images !== null\r\n                                                                                                ? `${book.cover_images.img_1}`\r\n                                                                                                : ''\r\n                                                                                        }\r\n                                                                                        alt=''\r\n                                                                                    />\r\n                                                                                </Link>\r\n                                                                            </div>\r\n\r\n                                                                            <div className='productContent'>\r\n                                                                                <Link to={`/product/${book.id}`}>\r\n                                                                                    <h4 className='productTitle limit-character'>\r\n                                                                                        {book.name}\r\n                                                                                    </h4>\r\n                                                                                </Link>\r\n                                                                                <h5 className='authorName'>\r\n                                                                                    {book.book_author.name}\r\n                                                                                </h5>\r\n                                                                                <p className='productPrice'>\r\n                                                                                    Ksh {book.price}\r\n                                                                                </p>\r\n                                                                            </div>\r\n                                                                        </Card>\r\n                                                                    </LazyLoad>\r\n                                                                </Col>\r\n                                                            );\r\n                                                        })\r\n                                                    )}\r\n                                                </Row>\r\n\r\n                                                <Row className='Pagination-Row mt-5'>\r\n                                                    <div className='col'>\r\n                                                        <ul className='singleFilter d-flex align-items-center'>\r\n                                                            <li>\r\n                                                                <label htmlFor=''>Sort By</label>\r\n                                                            </li>\r\n                                                            <li>\r\n                                                                <select\r\n                                                                    className='filterSelect form-control'\r\n                                                                    value={sortBy}\r\n                                                                    onChange={handleSortBy}\r\n                                                                >\r\n                                                                    <option value=''>select</option>\r\n                                                                    <option value='Popular'>Popular</option>\r\n                                                                    <option value='New'>New</option>\r\n                                                                    <option value='Price: low to high'>\r\n                                                                        Price: low to high\r\n                                                                    </option>\r\n                                                                    <option value='Price: high to low'>\r\n                                                                        Price: high to low\r\n                                                                    </option>\r\n                                                                </select>\r\n                                                            </li>\r\n                                                        </ul>\r\n                                                    </div>\r\n\r\n                                                    <div className='col'>\r\n                                                        <ul className='singleFilter d-flex align-items-center'>\r\n                                                            <li>\r\n                                                                <label htmlFor=''>Show</label>\r\n                                                            </li>\r\n\r\n                                                            <li>\r\n                                                                <select\r\n                                                                    name='up-filter-select'\r\n                                                                    className='filterSelect form-control'\r\n                                                                    value={pagination.show}\r\n                                                                    onChange={handleShowBook}\r\n                                                                >\r\n                                                                    <option value='20'>20</option>\r\n                                                                    <option value='45'>45</option>\r\n                                                                    <option value='100'>100</option>\r\n                                                                </select>\r\n                                                            </li>\r\n                                                        </ul>\r\n                                                    </div>\r\n\r\n                                                    <div className='col'>\r\n                                                        <nav aria-label='Page navigation'>\r\n                                                            <ul className='pagination align-items-center justify-content-between'>\r\n                                                                <li\r\n                                                                    className='page-item'\r\n                                                                    onClick={handlePreviews}\r\n                                                                >\r\n                                                                    <button className='page-link'>\r\n                                                                        <i className='fas fa-chevron-left'/>\r\n                                                                    </button>\r\n                                                                </li>\r\n                                                                <li\r\n                                                                    className={`page-item ${classes.page_field}`}\r\n                                                                >\r\n                                                                    Page\r\n                                                                </li>\r\n                                                                <li\r\n                                                                    className={`page-item ${classes.page_field}`}\r\n                                                                >\r\n                                                                    <input\r\n                                                                        type='text'\r\n                                                                        className='page-link'\r\n                                                                        value={pagination.page}\r\n                                                                        readOnly\r\n                                                                    />\r\n                                                                </li>\r\n                                                                <li className='page-item'>of</li>\r\n                                                                <li\r\n                                                                    className={`page-item ${classes.page_field}`}\r\n                                                                >\r\n                                                                    <input\r\n                                                                        type='text'\r\n                                                                        value={totalPage || ' 0'}\r\n                                                                        className='page-link'\r\n                                                                        readOnly\r\n                                                                    />\r\n                                                                </li>\r\n                                                                <li className='page-item' onClick={handleNext}>\r\n                                                                    <button className='page-link'>\r\n                                                                        <i className='fas fa-chevron-right'/>\r\n                                                                    </button>\r\n                                                                </li>\r\n                                                            </ul>\r\n                                                        </nav>\r\n                                                    </div>\r\n                                                </Row>\r\n                                            </>\r\n                                        )}\r\n                                    </div>\r\n                                </Col>\r\n                            </Row>\r\n                        </Container>\r\n                    </section>\r\n                    <section\r\n                        className='mailSubscribe clearfix sectionBgImage sectionBgImg01 secGap'\r\n                        id='mailSubscribe'\r\n                    >\r\n                        <Container className='container'>\r\n                            <NewsLetterComponent/>\r\n                        </Container>\r\n                    </section>\r\n                </main>\r\n\r\n                <Modal show={filterSortShow} onHide={() => setFilterSortShow(false)} size=\"lg\" centered>\r\n                    <ModalBody>\r\n                        <Filters callback={PriceRange}/>\r\n\r\n                        <h2 className='asideTitle'>Sorting</h2>\r\n                        <Sorting\r\n                            // filterShow={filterShow}\r\n                            sortBy={sortBy}\r\n                            handleSortBy={handleSortBy}\r\n                            pagination={pagination}\r\n                            handleShowBook={handleShowBook}\r\n                            classes={classes}\r\n                            handlePreviews={handlePreviews}\r\n                            totalPage={totalPage}\r\n                            handleNext={handleNext}\r\n                        />\r\n                    </ModalBody>\r\n                </Modal>\r\n                <FooterComponent/>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    const initItem = state.book.total !== undefined ? state.book.total : 1;\r\n    const initShowItem = state.book.show !== undefined ? state.book.show : 5;\r\n    return {\r\n        book: state.book ? state.book : [],\r\n        cart: state.shop.cart,\r\n        totalItem: initItem,\r\n        showItem: initShowItem,\r\n        favorite: state.favorite,\r\n        filter: state.filter,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        fetchBooks: (page, show, keyword) =>\r\n            dispatch(fetchAllBook(page, show, keyword)),\r\n        booksByCategory: (id, page, show) =>\r\n            dispatch(fetchBooksByCategory(id, page, show)),\r\n        filterByPrice: (page, show, lowPrice, highestPrice, type, type_id) =>\r\n            dispatch(\r\n                filterByPriceRange(page, show, lowPrice, highestPrice, type, type_id)\r\n            ),\r\n        filterShortByType: (page, show, query) =>\r\n            dispatch(filterShortBy(page, show, query)),\r\n        stageList: (category_id) => dispatch(fetchStages(category_id)),\r\n        getBooksByFilter: (page, show, filterType, filterId) =>\r\n            dispatch(fetchBooksByFilter(page, show, filterType, filterId)),\r\n    };\r\n};\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShopPage);\r\n"],"sourceRoot":""}