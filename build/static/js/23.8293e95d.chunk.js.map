{"version":3,"sources":["components/UserNav/UserNav.js","pages/users/Subscription.jsx"],"names":["UserNav","sm","className","id","asideMenu","map","data","index","key","NavItem","nav_item","ClassName","class","Title","title","Url","url","IconName","icon_name","ActiveClassName","active_link","connect","state","cart","shop","favorite","auth","user","subscribeOption","site","subscriptions","pending","dispatch","AllSubscriptions","email","getSubscriptions","setSubscriptions","options","props","useState","updated","setUpdated","show","type","message","setMessage","subscription","useEffect","a","handleChange","e","target","name","checked","announcement","sale_invitation","weekly_newsletter","unsubscribe","handleSubmit","preventDefault","axios","post","URL","__SET_SUBSCRIPTIONS","subscriber_id","then","res","setTimeout","catch","error","response","totalItem","length","totalFavorite","items","loading","favorite_item","cartItem","menuActive","fluid","noGutters","Body","onSubmit","Group","controlId","Check","label","disabled","onChange","variant","onClose","dismissible"],"mappings":"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","file":"static/js/23.8293e95d.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Col } from 'react-bootstrap'\r\nimport Menu from '../LiComponent/MenuComponents'\r\nimport asideMenu from \"../../inc/menu/order_nav_menu\";\r\n\r\nfunction UserNav() {\r\n  return (\r\n    <Col sm=\"2\">\r\n      <aside className=\"userAsideBar pt-3 clearfix shadow\" id=\"userAsideBar\">\r\n        <nav className=\"userNav\">\r\n          <ul className=\"userNavBar\">\r\n            {asideMenu.map((data, index) =>\r\n              <Menu\r\n                key={index}\r\n                NavItem={data.nav_item}\r\n                ClassName={data.class}\r\n                Title={data.title}\r\n                Url={data.url}\r\n                IconName={data.icon_name}\r\n                ActiveClassName={data.active_link}\r\n              />\r\n            )}\r\n          </ul>\r\n        </nav>\r\n      </aside>\r\n    </Col>\r\n  );\r\n}\r\n\r\nexport default UserNav;\r\n","import React,{useState, useEffect} from 'react';\r\nimport { Container, Row, Col, Card, Form, Button, Alert} from 'react-bootstrap';\r\nimport  HeaderComponent from \"../../components/header/Header\";\r\nimport  MobileHeader from \"../../components/header/MobileHeader\";\r\nimport { connect } from 'react-redux';\r\nimport UserNav from \"../../components/UserNav/UserNav\";\r\nimport PageLoader from \"../../components/pageLoader/PageLoaderComponent\";\r\nimport axios from 'axios'\r\nimport { URL } from '../../constants/config'\r\nimport { getSubscriptions, setSubscriptions } from '../../redux/actions/siteActions'\r\n\r\nconst Subscription = (props) => {\r\n\r\n  const { auth, AllSubscriptions, pending, subscribeOption} = props\r\n  const [updated, setUpdated] = useState(false)\r\n  const [message, setMessage] = useState({ show: false, type: 'unknown', message: '' })\r\n\r\n  const subscription = { ...subscribeOption}\r\n\r\n  useEffect(() => {\r\n    (async function(){      \r\n      AllSubscriptions(auth.email);\r\n    })();\r\n  }, [auth.email, updated])\r\n\r\n  const handleChange = (e) => {\r\n\r\n    if((e.target.name === 'unsubscribe') && (e.target.checked)){\r\n        return props.setSubscriptions({\r\n            announcement       : false,\r\n            sale_invitation    : false,\r\n            weekly_newsletter  : false,\r\n            unsubscribe        : true\r\n        })\r\n    }\r\n\r\n    //setSubscription({ ...subscription, [e.target.name]: e.target.checked })\r\n    props.setSubscriptions({ ...subscription, [e.target.name]: e.target.checked })\r\n  }\r\n\r\n  const handleSubmit = async(e) => {\r\n\r\n    e.preventDefault();\r\n\r\n    axios.post(URL.__SET_SUBSCRIPTIONS, {\r\n\r\n      email: auth.email,\r\n      subscriber_id: auth.id,\r\n      announcement: subscription.announcement,\r\n      sale_invitation: subscription.sale_invitation,\r\n      weekly_newsletter: subscription.weekly_newsletter,\r\n      unsubscribe: subscription.unsubscribe\r\n\r\n     }).then(res => {\r\n\r\n       setMessage({ show: true, type: 'success', message: res.data.message });\r\n       setUpdated(true);\r\n       setTimeout(() => {\r\n         setMessage({ show: false, type: 'unknown', message: '' })\r\n       }, 5000);\r\n\r\n    }).catch(error => {\r\n\r\n      if(error.response){\r\n          setMessage({ show: true, type: 'danger', message: error.response.data.message });\r\n          setUpdated(false);\r\n          setTimeout(() => {\r\n            setMessage({ show: false, type: 'unknown', message: '' })\r\n          }, 5000);\r\n      }\r\n    })\r\n\r\n  }\r\n\r\n  const totalItem = props.cart.length;\r\n  const totalFavorite = props.favorite.items.length;\r\n\r\n  return (\r\n    <>\r\n      <PageLoader loading={pending} />\r\n      <div className=\"allWrapper\">\r\n        <HeaderComponent\r\n          favorite_item={totalFavorite}\r\n          cartItem={totalItem}\r\n          menuActive={true}\r\n        />\r\n        <MobileHeader\r\n          favorite_item={totalFavorite}\r\n          cartItem={totalItem}\r\n          menuActive={true}\r\n         />\r\n        <div className=\"userBodyArea clearfix\" id=\"userBodyArea\">\r\n          <Container fluid={true} className=\"pl-0 pr-0\">\r\n            <Row noGutters>\r\n              <UserNav />\r\n              <Col>\r\n                <main\r\n                  className=\"userMainContent clearfix bgImage bgImg03\"\r\n                  id=\"userMainContent\"\r\n                >\r\n                  <section\r\n                    className=\"myOrderArea secGap clearfix\"\r\n                    id=\"myOrderArea\"\r\n                  >\r\n                    <Container fluid={true}>\r\n                      <Row>\r\n                        <Col sm=\"12\">\r\n                          <Card>\r\n                            <Card.Body className=\"pt-5\">\r\n                              <h2 className=\"cardSecTitle mb-3\">\r\n                                Manage email subscription\r\n                              </h2>\r\n                              <h5 className=\"cardSubtitle mb-2\">\r\n                                Please choose which types of emails you would\r\n                                like to receive from us\r\n                              </h5>\r\n                              <Form\r\n                                className=\"profileSettingsForm\"\r\n                                onSubmit={handleSubmit}\r\n                              >\r\n                                <Row>\r\n                                  <Col sm=\"12\">\r\n                                    <Form.Group\r\n                                      controlId={\"formCheckbox1\"}\r\n                                      className={\"formCheckbox mt-2\"}\r\n                                    >\r\n                                      <Form.Check\r\n                                        type={\"checkbox\"}\r\n                                        label={\"Announcements\"}\r\n                                        name='announcement'\r\n                                        disabled={subscription.unsubscribe && true}\r\n                                        checked={subscription.announcement}\r\n                                        onChange={handleChange}\r\n                                      />\r\n                                    </Form.Group>\r\n                                  </Col>\r\n\r\n                                  <Col sm=\"12\">\r\n                                    <Form.Group\r\n                                      controlId=\"formCheckbox2\"\r\n                                      className=\"formCheckbox mt-2\"\r\n                                    >\r\n                                      <Form.Check\r\n                                        type=\"checkbox\"\r\n                                        label=\"Sale invitations\"\r\n                                        name=\"sale_invitation\"\r\n                                        disabled={subscription.unsubscribe && true}\r\n                                        checked={subscription.sale_invitation}\r\n                                        onChange={handleChange}\r\n                                      />\r\n                                    </Form.Group>\r\n                                  </Col>\r\n\r\n                                  <Col sm=\"12\">\r\n                                    <Form.Group\r\n                                      controlId=\"formCheckbox3\"\r\n                                      className=\"formCheckbox mt-2\"\r\n                                    >\r\n                                      <Form.Check\r\n                                        type=\"checkbox\"\r\n                                        label=\"Weekly Newsletter\"\r\n                                        name=\"weekly_newsletter\"\r\n                                        disabled={subscription.unsubscribe && true}\r\n                                        checked={subscription.weekly_newsletter}\r\n                                        onChange={handleChange}\r\n                                      />\r\n                                    </Form.Group>\r\n                                  </Col>\r\n\r\n                                  <Col sm=\"12\">\r\n                                    <Form.Group\r\n                                      controlId=\"formCheckbox4\"\r\n                                      className=\"formCheckbox mt-2\"\r\n                                    >\r\n                                      <Form.Check\r\n                                        type=\"checkbox\"\r\n                                        label=\"Unsubscribe\"\r\n                                        name=\"unsubscribe\"\r\n                                        checked={subscription.unsubscribe}\r\n                                        onChange={handleChange}\r\n                                      />\r\n                                    </Form.Group>\r\n                                  </Col>\r\n                                  <Col sm=\"12\">\r\n                                    <Button\r\n                                      className={\"mt-3\"}\r\n                                      type=\"submit\"\r\n                                      name=\"save\"\r\n                                    >\r\n                                      Save\r\n                                    </Button>\r\n                                  </Col>\r\n                                </Row>\r\n                              </Form>\r\n                            </Card.Body>\r\n                          </Card>\r\n                        </Col>\r\n                      </Row>\r\n\r\n                      <Alert show={message.show} variant={message.type} onClose={() => setMessage({ ...message, show: false })} dismissible>\r\n                        <p>{message.message}</p>\r\n                      </Alert>\r\n\r\n                    </Container>\r\n                  </section>\r\n                </main>\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\n\r\nconst mapStateToProps = state => ({\r\n  cart              : state.shop.cart,\r\n  favorite          : state.favorite,\r\n  auth              : state.auth.user,\r\n  subscribeOption   : state.site.subscriptions,\r\n  pending           : state.site.pending\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    AllSubscriptions       : (email) => dispatch(getSubscriptions(email)),\r\n    setSubscriptions    : (options)  => dispatch(setSubscriptions(options))\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Subscription);\r\n"],"sourceRoot":""}